
spring:

  datasource:
    url: jdbc:postgresql://localhost:5432/ctf
    username: ctfuser
    password: ctfpass
    driver-class-name: org.postgresql.Driver

  # JPA/Hibernate configuration
  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        jdbc:
          lob:
            non_contextual_creation: true

  # SQL initialization
  sql:
    init:
      mode: never

  # LDAP configuration
  # NOTE: Will be overridden by @DynamicPropertySource
  ldap:
    urls: ldap://localhost:389
    base: dc=ctf,dc=local
    username: cn=admin,dc=ctf,dc=local
    password: admin

  # Security LDAP settings
  security:
    ldap:
      user:
        search-base: ou=users,dc=ctf,dc=local
        search-filter: (uid={0})

# External API configuration (mocked in tests)
CONFLUENCE_EMAIL: test@example.com
CONFLUENCE_API_TOKEN: dummy-token-for-testing

# Logging for debugging test failures
logging:
  level:
    org.springframework.security: INFO      # Reduce noise in tests
    org.springframework.ldap: INFO          # Reduce noise in tests
    org.springframework.test: DEBUG         # Show test lifecycle
    org.hibernate.SQL: DEBUG                # Show SQL queries
    org.hibernate.type.descriptor.sql: TRACE # Show SQL parameters
    at.fhtw.ctfbackend: DEBUG              # Your application logs